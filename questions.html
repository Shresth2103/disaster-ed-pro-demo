<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Safety Simulation - DisasterED Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .simulation-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .progress-container {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px;
            margin-top: 15px;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            height: 8px;
            overflow: hidden;
        }

        .progress-fill {
            background: #fff;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 8px;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .scenario-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .scenario-text {
            font-size: 1.1em;
            color: #555;
            line-height: 1.6;
            margin-bottom: 25px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fff;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1em;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 500;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .score-container {
            text-align: center;
            padding: 30px;
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .score-container h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .final-score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .completion-message {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .simulation-container {
                margin: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
        }
        btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }
    </style>
    
</head>
<body>
    <div class="simulation-container">
        <div class="header">
            <h1>ğŸ”¥ Fire Safety Simulation</h1>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">Question 1 of 9</div>
            </div>
        </div>

        <div class="content" id="questionContainer">
            <!-- Questions will be loaded here -->
        </div>

        <div id="completionScreen" style="display: none;">
            <div class="score-container">
                <h2>ğŸ‰ Simulation Complete!</h2>
                <div class="final-score" id="finalScore">8/9</div>
                <div class="completion-message">
                    Great job! You've mastered fire safety basics. Remember these life-saving skills!
                </div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="restartSimulation()">Try Again</button>
                    <button class="btn btn-secondary" onclick="window.close()">Exit</button>
                    <button class="btn" id="downloadBtn" onclick="generateCertificate()">ğŸ“„ Download Certificate</button>
                    <!-- Find your existing buttons and modify like this -->

                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                title: "Classroom Fire Emergency",
                scenario: "You're in your classroom when the fire alarm rings. What's your first action?",
                options: [
                    { text: "ğŸƒâ€â™‚ï¸ Run to the nearest exit immediately", emoji: "ğŸƒâ€â™‚ï¸", correct: false },
                    { text: "ğŸ“ Call your parents first", emoji: "ğŸ“", correct: false },
                    { text: "ğŸ‘‚ Stop, listen to teacher's instructions, and follow evacuation protocol", emoji: "ğŸ‘‚", correct: true },
                    { text: "ğŸ’ Pack your belongings quickly", emoji: "ğŸ’", correct: false }
                ],
                feedback: {
                    correct: "âœ… Excellent! Always follow your teacher's evacuation instructions for safety.",
                    incorrect: "âŒ Not quite right. Always follow your teacher's evacuation instructions for safety."
                }
            },
            {
                title: "Kitchen Fire Emergency",
                scenario: "You're in the school cafeteria when oil in a pan catches fire. What should you do?",
                options: [
                    { text: "ğŸ’§ Pour water on the oil fire", emoji: "ğŸ’§", correct: false },
                    { text: "ğŸ”¥ Turn off heat source and cover with a lid to cut off oxygen", emoji: "ğŸ”¥", correct: true },
                    { text: "ğŸƒâ€â™€ï¸ Run away immediately", emoji: "ğŸƒâ€â™€ï¸", correct: false },
                    { text: "ğŸ³ Try to move the burning pan", emoji: "ğŸ³", correct: false }
                ],
                feedback: {
                    correct: "âœ… Perfect! Cutting off oxygen supply by covering the pan is the right approach for oil fires.",
                    incorrect: "âŒ Water on oil fires makes them spread! Always cut off oxygen supply by covering the pan."
                }
            },
            {
                title: "Electrical Fire Emergency",
                scenario: "You notice sparks and smoke coming from an electrical outlet. Your first action should be?",
                options: [
                    { text: "âš¡ Turn off the main electrical switch/breaker", emoji: "âš¡", correct: true },
                    { text: "ğŸ’§ Pour water on the electrical source", emoji: "ğŸ’§", correct: false },
                    { text: "ğŸ‘‹ Touch the outlet to check if it's hot", emoji: "ğŸ‘‹", correct: false },
                    { text: "ğŸ”Œ Continue using other electrical devices", emoji: "ğŸ”Œ", correct: false }
                ],
                feedback: {
                    correct: "âœ… Great! Always cut off electrical power first - never use water on electrical fires!",
                    incorrect: "âŒ Never use water on electrical fires! Always turn off the power source first."
                }
            },
            {
                title: "Smoke-Filled Corridor",
                scenario: "The hallway is filled with thick smoke. How should you move?",
                options: [
                    { text: "ğŸš¶â€â™‚ï¸ Walk normally standing upright", emoji: "ğŸš¶â€â™‚ï¸", correct: false },
                    { text: "ğŸƒâ€â™‚ï¸ Run as fast as possible", emoji: "ğŸƒâ€â™‚ï¸", correct: false },
                    { text: "ğŸ› Crawl low to the ground, staying below the smoke", emoji: "ğŸ›", correct: true },
                    { text: "ğŸª‘ Wait for someone to rescue you", emoji: "ğŸª‘", correct: false }
                ],
                feedback: {
                    correct: "âœ… Excellent! Crawling low keeps you below toxic smoke and helps you breathe cleaner air.",
                    incorrect: "âŒ Remember: crawl low under smoke! Clean air stays closer to the ground."
                }
            },
            {
                title: "Blocked Exit Route",
                scenario: "Your primary exit is blocked by fire. What's your next step?",
                options: [
                    { text: "ğŸ”¥ Try to run through the fire", emoji: "ğŸ”¥", correct: false },
                    { text: "ğŸ  Hide under a desk", emoji: "ğŸ ", correct: false },
                    { text: "ğŸšª Use the alternate exit route you learned during drills", emoji: "ğŸšª", correct: true },
                    { text: "ğŸªŸ Break a window immediately", emoji: "ğŸªŸ", correct: false }
                ],
                feedback: {
                    correct: "âœ… Perfect! This is why we practice fire drills - to know alternate escape routes!",
                    incorrect: "âŒ Never run through fire! Always use alternate exit routes learned in fire drills."
                }
            },
            {
                title: "Fire Triangle Knowledge",
                scenario: "What three elements does fire need to survive? (Understanding this helps you put out fires effectively)",
                options: [
                    { text: "ğŸ’§ Water, air, and heat", emoji: "ğŸ’§", correct: false },
                    { text: "ğŸ”º Oxygen, heat, and fuel", emoji: "ğŸ”º", correct: true },
                    { text: "ğŸ’¨ Smoke, flames, and ash", emoji: "ğŸ’¨", correct: false },
                    { text: "âš›ï¸ Carbon, hydrogen, and oxygen", emoji: "âš›ï¸", correct: false }
                ],
                feedback: {
                    correct: "âœ… Correct! Remove any one element (oxygen, heat, or fuel) and the fire goes out!",
                    incorrect: "âŒ The fire triangle consists of oxygen, heat, and fuel. Remove any one to stop the fire!"
                }
            },
            {
                title: "Fire Extinguisher Types",
                scenario: "Which fire extinguisher should be used for electrical fires in your school's computer lab?",
                options: [
                    { text: "ğŸ’§ Water-based extinguisher", emoji: "ğŸ’§", correct: false },
                    { text: "ğŸ«§ Foam extinguisher", emoji: "ğŸ«§", correct: false },
                    { text: "â„ï¸ CO2 (Carbon Dioxide) extinguisher", emoji: "â„ï¸", correct: true },
                    { text: "ğŸ–ï¸ Sand", emoji: "ğŸ–ï¸", correct: false }
                ],
                feedback: {
                    correct: "âœ… Right! CO2 extinguishers don't conduct electricity and are safe for electrical fires.",
                    incorrect: "âŒ CO2 extinguishers are safest for electrical fires - water conducts electricity!"
                }
            },
            {
                title: "Emergency Contact",
                scenario: "What's the fire emergency number you should call in India?",
                options: [
                    { text: "ğŸ‘®â€â™‚ï¸ 100 (Police)", emoji: "ğŸ‘®â€â™‚ï¸", correct: false },
                    { text: "ğŸš’ 101 (Fire Department)", emoji: "ğŸš’", correct: true },
                    { text: "ğŸš‘ 102 (Ambulance)", emoji: "ğŸš‘", correct: false },
                    { text: "ğŸ†˜ 108 (Emergency)", emoji: "ğŸ†˜", correct: false }
                ],
                feedback: {
                    correct: "âœ… Perfect! 101 connects you directly to the Fire Department across India.",
                    incorrect: "âŒ Remember: 101 is for Fire Department emergencies in India. Save this number!"
                }
            },
            {
                title: "Personal Safety - Clothing Fire",
                scenario: "If your clothes catch fire, what should you immediately do?",
                options: [
                    { text: "ğŸƒâ€â™‚ï¸ Run to get help", emoji: "ğŸƒâ€â™‚ï¸", correct: false },
                    { text: "ğŸ”„ Stop, Drop, and Roll", emoji: "ğŸ”„", correct: true },
                    { text: "ğŸ’§ Pour water on yourself", emoji: "ğŸ’§", correct: false },
                    { text: "ğŸ‘• Remove clothes immediately", emoji: "ğŸ‘•", correct: false }
                ],
                feedback: {
                    correct: "âœ… Excellent! Stop, Drop, and Roll smothers the flames by cutting off oxygen supply.",
                    incorrect: "âŒ Stop, Drop, and Roll! Running makes fire worse. This technique saves lives!"
                }
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;

        function loadQuestion() {
            const question = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="scenario-title">${question.title}</div>
                <div class="scenario-text">${question.scenario}</div>
                <div class="options-container">
                    ${question.options.map((option, index) => `
                        <div class="option" onclick="selectOption(${index})">
                            <span style="font-size: 1.2em;">${option.emoji}</span>
                            <span>${option.text}</span>
                        </div>
                    `).join('')}
                </div>
                <div class="feedback" id="feedback"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="checkAnswer()" id="checkBtn" disabled>Check Answer</button>
                    <button class="btn btn-secondary" onclick="nextQuestion()" id="nextBtn" style="display: none;">Next Question â†’</button>
                </div>
            `;

            updateProgress();
        }

        function selectOption(index) {
            // Remove previous selections
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            
            // Add selection to clicked option
            document.querySelectorAll('.option')[index].classList.add('selected');
            
            selectedOption = index;
            document.getElementById('checkBtn').disabled = false;
        }

        function checkAnswer() {
            const question = questions[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            
            // Disable further selection
            options.forEach(opt => opt.style.pointerEvents = 'none');
            
            // Show correct/incorrect styling
            question.options.forEach((option, index) => {
                if (option.correct) {
                    options[index].classList.add('correct');
                } else if (index === selectedOption) {
                    options[index].classList.add('incorrect');
                }
            });

            // Show feedback
            if (question.options[selectedOption].correct) {
                feedback.className = 'feedback correct show';
                feedback.textContent = question.feedback.correct;
                score++;
            } else {
                feedback.className = 'feedback incorrect show';
                feedback.textContent = question.feedback.incorrect;
            }

            // Show next button
            document.getElementById('checkBtn').style.display = 'none';
            
            if (currentQuestion === questions.length - 1) {
                document.getElementById('nextBtn').textContent = 'View Results';
            }
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion >= questions.length) {
                showCompletion();
            } else {
                selectedOption = null;
                loadQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
        }

        function showCompletion() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('completionScreen').style.display = 'block';
            
            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('finalScore').textContent = `${score}/${questions.length} (${percentage}%)`;
            
            // Update completion message based on score
            const completionMessage = document.querySelector('.completion-message');
            if (percentage >= 90) {
                completionMessage.textContent = "Outstanding! You're a fire safety expert! ğŸ†";
            } else if (percentage >= 70) {
                completionMessage.textContent = "Great job! You have solid fire safety knowledge! ğŸŒŸ";
            } else if (percentage >= 50) {
                completionMessage.textContent = "Good effort! Review the concepts and try again! ğŸ“š";
            } else {
                completionMessage.textContent = "Keep learning! Fire safety knowledge saves lives! ğŸ’ª";
            }

            // Update progress to 100%
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = 'Completed!';
        }

        function restartSimulation() {
            currentQuestion = 0;
            score = 0;
            selectedOption = null;
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('completionScreen').style.display = 'none';
            loadQuestion();
        }

        // Initialize the simulation
        loadQuestion();

  // Example certificate content
  doc.setFontSize(20);
  doc.text("ğŸ… DisasterED Pro Certificate", 20, 30);
  doc.setFontSize(12);
  doc.text("This certifies that you successfully completed the simulation.", 20, 50);

  // Save the file
  doc.save("DisasterED_Certificate.pdf");
}
    // Get student details
    const studentName = prompt("Enter student name:") || "Student";
    const schoolName = prompt("Enter school name:") || "School";
    const percentage = Math.round((score / questions.length) * 100);
    const date = new Date().toLocaleDateString('en-IN');
    
    // Certificate background
    doc.setFillColor(240, 248, 255);
    doc.rect(0, 0, 210, 297, 'F');
    
    // Header
    doc.setFillColor(102, 126, 234);
    doc.rect(0, 0, 210, 40, 'F');
    
    // Title
    doc.setTextColor(255, 255, 255);
    doc.setFontSize(24);
    doc.setFont("helvetica", "bold");
    doc.text('CERTIFICATE OF COMPLETION', 105, 25, { align: 'center' });
    
    // DisasterED Pro Logo
    doc.setFontSize(16);
    doc.text('ğŸš¨ DisasterED Pro', 105, 35, { align: 'center' });
    
    // Main content
    doc.setTextColor(0, 0, 0);
    doc.setFontSize(18);
    doc.setFont("helvetica", "normal");
    doc.text('This is to certify that', 105, 70, { align: 'center' });
    
    // Student name
    doc.setFontSize(28);
    doc.setFont("helvetica", "bold");
    doc.setTextColor(102, 126, 234);
    doc.text(studentName, 105, 90, { align: 'center' });
    
    // School name
    doc.setFontSize(16);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(0, 0, 0);
    doc.text(`from ${schoolName}`, 105, 105, { align: 'center' });
    
    // Achievement text
    doc.setFontSize(14);
    doc.text('has successfully completed the', 105, 125, { align: 'center' });
    
    // Course name
    doc.setFontSize(20);
    doc.setFont("helvetica", "bold");
    doc.setTextColor(220, 53, 69);
    doc.text('ğŸ”¥ FIRE SAFETY TRAINING', 105, 145, { align: 'center' });
    
    // Score
    doc.setFontSize(16);
    doc.setFont("helvetica", "normal");
    doc.setTextColor(0, 0, 0);
    doc.text(`Score: ${score}/${questions.length} (${percentage}%)`, 105, 165, { align: 'center' });
    
    // Performance message
    let performanceMsg = "";
    if (percentage >= 90) performanceMsg = "Outstanding Performance! ğŸ†";
    else if (percentage >= 70) performanceMsg = "Great Job! ğŸŒŸ";
    else if (percentage >= 50) performanceMsg = "Good Effort! ğŸ“š";
    else performanceMsg = "Keep Learning! ğŸ’ª";
    
    doc.setFontSize(14);
    doc.setTextColor(102, 126, 234);
    doc.text(performanceMsg, 105, 180, { align: 'center' });
    
    // Date
    doc.setFontSize(12);
    doc.setTextColor(0, 0, 0);
    doc.text(`Date: ${date}`, 105, 200, { align: 'center' });
    
    // Bottom section
    doc.setFontSize(10);
    doc.text('This certificate validates the completion of disaster preparedness training', 105, 220, { align: 'center' });
    doc.text('designed to enhance emergency response skills and save lives.', 105, 230, { align: 'center' });
    
    // Signature area
    doc.setDrawColor(102, 126, 234);
    doc.setLineWidth(1);
    doc.line(30, 260, 80, 260);
    doc.line(130, 260, 180, 260);
    
    doc.setFontSize(10);
    doc.text('Instructor', 55, 270, { align: 'center' });
    doc.text('DisasterED Pro', 155, 270, { align: 'center' });
    
    // Footer
    doc.setFillColor(102, 126, 234);
    doc.rect(0, 280, 210, 17, 'F');
    doc.setTextColor(255, 255, 255);
    doc.setFontSize(10);
    doc.text('Smart India Hackathon 2025 | Saving Lives Through Education', 105, 290, { align: 'center' });
    
    // Save the PDF
    const fileName = `Fire_Safety_Certificate_${studentName.replace(/\s+/g, '_')}_${date.replace(/\//g, '-')}.pdf`;
    doc.save(fileName);
}
    </script>
</body>
</html>
